\documentclass[a4paper,12pt]{report}

\usepackage{float}
\usepackage{hyperref}

\begin{document}
\tableofcontents

\title{relazione}

\chapter{Analisi dei requisiti}
\section{Intervista}
Vogliamo sviluppare un social network puramente testuale.
Gli utenti possono iscriversi e disicriversi. Al momento dell'iscrizione l'utente inserisce le sue generalità, opzionalmente la propria locazione, una email e decide un nome utente univoco e una password.
L'utente può cambiare la sua password ma non può riutilizzare una password precedente.
Ogni utente può pubblicare dei post. Un post consiste in un testo scritto, opzionalmente accompagnato da una locazione decisa dall'autore. 
Per ogni post Viene anche registrata la timestamp.
Ogni utente può commentare i post e rispondere ad altri commenti.
L'utente può correggere post e commenti.
L'utente ha una reputazione, definita come il numero di like totali ricevuti meno il numero totale di dislike ricevuti.
Ogni utente può mettere like e dislike a post e commenti.
Gli utenti inoltre possono seguire altri utenti.
Gli utenti possono chattare con altri utenti. Le chat si compongono di messaggi inviati da utenti. Ogni messaggio ha un suo autore, un timestamp di invio e, dopo essere stato letto, un timestamp di lettura.
Ogni utente può creare un gruppo. Un gruppo è una aggregazione di uno o più utenti. Ogni gruppo ha uno o più utenti amministratori.
Ogni gruppo ha una e una sola chat interna a cui possono partecipare solo gli utenti membri.
\section{Definizione delle specifiche in linguaggio naturale ed estrazione dei concetti principali}
Vogliamo sviluppare un social network puramente testuale.
Gli \textbf{utenti} possono iscriversi e disicriversi. Al momento dell'iscrizione l'utente inserisce le sue generalità, opzionalmente la propria locazione, una email e decide un nome utente univoco e una password.
L'utente può cambiare la sua password ma non può riutilizzare una password precedente.
Ogni utente può pubblicare dei \textbf{post}. Un post consiste in un testo scritto, opzionalmente accompagnato da una locazione decisa dall'autore (cioè l'utente che ha scritto il post).
Ogni utente può \textbf{commentare} i post e rispondere ad altri commenti.
L'utente può correggere post e commenti.
Ogni utente può mettere \textbf{like} e dislike a post e commenti.
Gli utenti inoltre possono \textbf{seguire} altri utenti.
Gli utenti possono chattare con altri utenti. Le \textbf{chat} si compongono di messaggi inviati da utenti. Ogni \textbf{messaggio} ha un suo autore, un timestamp di invio e, dopo essere stato letto, un timestamp di lettura.
Ogni utente può creare un \textbf{gruppo}. Un gruppo è una aggregazione di uno o più utenti. Ogni gruppo ha uno o più utenti amministratori.
Ogni gruppo ha una e una sola chat interna a cui possono partecipare solo gli utenti membri.
\section{Definizioni}
\begin{itemize}
    \item Utente: un iscritto al nostro social network. Sinonimi: iscritto 
    \item Post: un testo scritto da un utente 
    \item Autore di un post: l'utente che ha scritto il post
    \item Commento: un post che fa riferimento ad un altro post (detto post padre)
    \item Like: è una segnalazione di gradimento ad un post
    \item Dislike: l'opposto di un like
    \item Reputazione di un utente: la differenza tra like e dislike complessivi dei post scritti dall'utente
    \item Messaggio: un testo scritto da un utente con destinatario un gruppo
    \item Chat: una sequenza di messaggi
    \item Gruppo: un insieme di utenti 
    \item Locazione: un luogo geografico da cui l'utente ha scritto un post
    \item Amministratore di un gruppo: un utente che può aggiungere e rimuovere utenti dal gruppo
\end{itemize}


\subsection{Operazioni utente}
\begin{itemize}
    \item Creare un nuovo utente
    \item Cambiare password utente
    \item Seguire utente
    \item Mandare un messaggio
    \item Postare e commentare
    \item Like/dislike
    \item Creare un gruppo
    \item Aggiungere utente al gruppo
    \item Vedere tutti i post in ordine cronologico (feed)
    \item Vedere utenti che hanno messo like a un post
    \item Leggere messaggi di una chat
    \item Login utente
    \item Aggiungere location a tabella location
    \item Vedere profilo utente (location, reputazione, post \ldots)
    \item Dare diritti amministratore ad un utente in un gruppo
\end{itemize}

\chapter{Progettazione Concettuale}
\section{Utenti}
L'entità utente ha come unico identificatore lo lo username. Per permettere agli utenti di seguire altri utenti abbiamo creato una relazione ad anello.
\section{Gruppi e sistema di messaggistica}
Poichè non esiste nessuna differenza tra un gruppo ed una chat abbiamo deciso di modellizzare questi due concetti con un'unica entità chiamata \texttt{CHAT}. La chat è una sequenza (ordinata) di messaggi. Ogni messaggio ha uno ed un solo utente mittente. Per modellizzare la meccanica di lettura dei messaggi in una chat da parte di ciascun utente abbiamo deciso di aggiungere alla relazione \texttt{MEMBRO} un attributo \texttt{TimestampUltimaLettura} che viene dovrà venire aggiornato ogni volta che l'utente accede alla chat. Lo schema E/R non esprime il vincolo secondo cui solo gli utenti membri di una chat possono inviare messaggi su quella chat. Faremo rispettare questo vincolo a livello di SQL.
\section{Regione}
Una regione può far parte di una ed una sola regione più grande, mentre una regione può contenere delle regioni più piccole. Esprimiamo questi vincoli con una relazione ad anello. Si viene perciò a formare un albero (o una foresta di alberi) che esprimono le gerarchie delle regioni geografiche. Lasciamo però inespresso il vincolo secondo cui non si debbano formare dei cicli all'interno di questa foresta, vincolo che abbiamo intenzione di imporre a livello applicativo. 
\section{Password}
Ogni utente ha uno storico di password che ci permette di impedire all'utente di riutilizzare password passate. Questo vincolo è espresso imponendo come identificatore della entità \texttt{STORICO\_PASSWORD} la tupla \texttt{(Password, UTENTE)}. Imponiamo inoltre il vincolo secondo cui un utente non può avere contemporaneamente due password creando l'identificatore \texttt{(Password, DataInserimento)}.
\section{Contenuto (post e commenti)}
Abbiamo modellizzato post e commenti in una gerarchia parziale ed esclusiva dove i post veri e propri (cioè quelli pubblicati \textbf{non} in risposta a qualche altro contenuto) sono istanze della classe padre \texttt{CONTENUTO}, mentre i commenti (cioè quei contenuti in risposta ad altri contenuti) sono rappresentati dall'entità figlia \texttt{COMMENTO}. Questa entità è legata a \texttt{CONTENUTO} dalla relazione \texttt{RISPOSTA}, che indica a quale contenuto il commento fa rifermento.
Per modellizzare la possibilità da parte degli utenti di mettere like e dislike ai contenuti abbiamo creato la relazione \texttt{REAZIONE} il cui attributo \texttt{LikeDislike} indica se la reazione è un like o un dislike. L'attributo \texttt{Timestamp} indica il momento temporale in cui l'utente ha espresso la sua reazione riguardo al contenuto. 
\section{Schema concettuale finale}
\chapter{Progettazione logica}
\section{Stima del volume dei dati}

\begin{itemize}
  \item UTENTE, E, 1000
  \item SCELTA, R, 5000
  \item STORICO\_PASSWORD, E, 5000
  \item SEGUIRE, R, 10000
  \item MEMBRO, E, 20000
  \item IMPERSONAZIONE, R, 20000
  \item APPARTENENZA, R, 20000
  \item CHAT, E, 2000 
  \item AGGIUNTO, R, 20000 
  \item MESSAGGIO, E, 300000
  \item MITTENTE, R, 300000
  \item CITAZIONE, R, 10000
  \item ELIMINAZIONE, R, 5000
  \item DOMICILIO, R, 100
  \item REGIONE, E, 150.000.000
  \item PARTE\_DI, R, 150.000.000

\end{itemize}
\section{Descrizione delle operazioni principali e stima della loro frequenza}
\section{Schemi di navigazione e tabelle degli accessi}
\section{Raffinamento dello schema (eliminazione di identificatori esterni, attributi composti e gerarchie, scelta delle chiavi)}
\section{Analisi delle ridondanze}
\section{Traduzione di entità e associazioni in relazioni}
\section{Schema relazionale finale}
\section{Traduzione delle operazioni in query SQL}
\chapter{Progettazione dell'applicazione}
\section{Descrizione dell'architettura dell'applicazione realizzata con obbligo di inserire alcuni screenshot dell'interfaccia utente}

\end{document}
